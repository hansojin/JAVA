### 필터

- 서블릿과 브라우저 간에 요청이나 응답이 이뤄질 때 미리 여러 가지 작업을 처리하는 기능
- 여러 서블릿에서 반복적으로 수행해야 하는 작업을 공통으로 처리할 수 있다는 장점을 지님
- 특정 기능이 분리되고 모듈화되었다는 점에서 가독성과 재사용성이 향상되며 유지 및 보수 또한 용이


### 리스너

- 특정 이벤트가 발생하기를 ‘귀 기울여’ 기다리다가 실행되는 메서드나 함수, 혹은 그 메서드를 지닌 객체를 가리킴
- 이벤트는 이 맥락에서는 발생한 특정 사건을 뜻함

#### 차이점

- 한 번 설정을 해두면 개발자가 매번 새로 코드를 입력하지 않아도 자동으로 실행된다는 점은 공통점
- 필터는 클라이언트와 서블릿 사이에서 작업을 미리 수행
- 리스너는 오가는 요청이나 응답에 관계 없이 특정 이벤트 (발생)에 의해 실행

---

### 필터

필터는 데이터를 가로채서 처리를 한다고 생각하면 된다. 하나의 작업에서 다른 작업으로 넘어갈 때나 어떤 작업이 또 다른 작업으로 넘어갈 때 데이터를 가로채서 처리를 할 수 있다. 요청이나 세션에 담긴 데이터뿐아니라 헤더에도 필터가 적용될 수 있다. 기존 작업이 일어나기 직전(전처리)이나 일어난 직후(후처리) 모두 필터가 적용되는 시점이다. 필터가 웹 프로그램에서 사용되는 경우는 다음과 같다.

* 전달받은 데이터를 인코딩하는 경우
* 세션 데이터를 인증하는 경우
* 이벤트나 공지 등 팝업을 추가하는 경우

웹 관련 클래스가 모두 그러하듯이 필터 클래스의 메서드도 요청 객체와 응답 객체를 매개 변수로 가진다. 여기에 추가적으로 FilterChain 객체를 매개 변수로 갖는데, 이유는 필터 기능 자체가 페이지의 분기점에 있기 때문이다. 따라서 FilterChain 객체는 필터 기능이 완료되고 다음 페이지로 연결하는 기능에 사용된다. 또한, 서블릿의 일반 클래스처럼 web.xml 파일에 등록해야 한다. 당연하겠지만 일반 클래스가 아니므로 `<servlet>태그`가 아니라 `<filter> 태그`를 사용한다.

필터 관련 클래스로는 javax.servlet.Filter, javax.servlet.FilterConfig, javax.servlet.FilterChain 등이 있다.

필터 클래스가 **일반 서블릿 클래스와 다른 점** 은 **Filter라는 인터페이스를 상속받는다는 것** 과 서블릿의 service()나 doGet(), doPost() 메서드 대신에 **doFilter() 메서드를 사용** 한다는 것이다. 또한, 매개 변수에는 Http 계열은 사용할 수 없고 코드에서처럼 HTTP를 지원하는 형으로 변환을 사용해야만 한다. 마지막으로 세 번째 매개 변수인 **FilterChain 클래스의 객체인 chain을 이용해서 다른 필터나 서블릿과 연결하는 코드를 반드시 작성** 해야 한다.

`<filter>태그`는 `<servlet>태그` 보다 앞에 놓여야 한다. 

이렇게 하나의 페이지에서 다른 페이지로 연결되는 사이에 데이터를 가로채서 특정 기능을 수행하는 클래스가 필터 클래스이다. 

필터 클래스를 사용하여 페이지를 분기하는 작업이 가능하다.

---

### 서블릿 이벤트

* 이벤트가 웹 프로그램에서 사용되는 경우
	* 컨텍스트가 초기화되는 경우
	* 세션이 생기거나 소멸되는 경우
	* 속성이 바뀌는 경우

이런 이벤트에 대해서 미리 web.xml 파일에 등록해 두면 웹 서버는 자동으로 이벤트를 감지하고 우리가 지정한 클래스 내의 메서드를 실행해 준다. 이벤트는 외부의 변화보다는 내부의 변화를 처리하는 경우가 많다.
서블릿에서 이벤트 클래스가 실행되게 하려면 무엇보다 web.xml파일의 설정이 중요하다. 초기에 웹 서버가 구동하면서 해당 이벤트를 대기 상태로 두기 때문이다. web.xml 파일에서 사용하는 태그로는 `<listener>`와 `<context-param>`이 있다. `<listener>` 태그는 서블릿의 이벤트를 대기 상태로 두고 `<context-param>` 태그는 초기화 매개 변수가 된다.

`<filter>`태그보다 앞에 `<content-param>`태그를 적는다.

ServletContext 객체를 가지고 web.xml 파일에 등록된 초기화 매개 변수들을 가져와서 사용할 수 있다.

ServletContext 객체의 변화에 대해 반응하는 메서드들은 ServletContextListener와 ServletContextAttributeListener 인터페이스에 정의되어 있기 때문에 이를 구현해 주어야 한다.

web.xml 파일에 이벤트 클래스를 등록하자. 이때 `<listen>`태그를 `<context-param>`태그보다 앞에 적는다.


